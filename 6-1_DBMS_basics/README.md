### Задача 1
*Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определённых данных.  
Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:*  

+ *электронные чеки в json-виде,*
+ *склады и автомобильные дороги для логистической компании,*
+ *генеалогические деревья,*
+ *кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,*
+ *отношения клиент-покупка для интернет-магазина.*  

*Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.*

Решение
---
>1.	**Электронные чеки в json-виде.**

Оптимальна NoSQL **документоориентированная** база данных, используемая при заранее неизвестных схеме данных и полного набора полей. В электронных чеках количество записей отличаются, т.к. разные покупатели/клиенты приобретают разный набор продуктов/услуг, поэтому набор данных будет отличаться. (Представитель – **MongoDB**.)  
  
>2.	**Cклады и автомобильные дороги для логистической компании.**
  
Целесообразно использовать реляционную БД, предполагающую строгую структуру и взаимосвязь данных. (Представители – **SQLite**, **PostgreSQL**, **MySQL**, **MS SQL Server**).  
  
>3.	**Генеалогические деревья.**
  
NoSQL **сетевая** база данных. Возможно, еще **иерархическая**. Есть сомнение, т.к. древовидная структура иерархической БД предполагает наличие у «потомка» единственного «родителя», тогда, как в генеалогическом дереве родителей предполагается 2. Похожая сетевая БД допускает больше одного «родителя».  
  
>4.	**Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации.**

NoSQL база данных типа **Ключ-значение** (Представители – **Redis**, **BerkleyDB**, **Memcached**).  
  
>5.	**Отношения клиент-покупка для интернет-магазина.**

NoSQL **Графовая** БД, используемая для построения связей между объектами, таких, как, например, рекомендательные ссылки на товары интернет-магазина, выбираемые с учетом вводимых запросов клиента (Представители – **Neo4j**, **OrientDB**).

___
### Задача 2
*Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):*
- *данные записываются на все узлы с задержкой до часа (асинхронная запись);*
- *при сетевых сбоях система может разделиться на 2 раздельных кластера;*
- *система может не прислать корректный ответ или сбросить соединение.*  

*Согласно PACELC-теореме как бы вы классифицировали эти реализации?*

Решение
---

>1.	**Данные записываются на все узлы с задержкой до часа (асинхронная запись).** 

По классификации согласно CAP-теореме, такая система относится к **CA** (Consistency & Availability), т.к. может соблюдаться доступность, согласованность нарушается только на ~час, что позволяет условно считать систему с сохранением согласованности, а устойчивость к разделению нарушается.
  
>2.	**При сетевых сбоях система может разделиться на 2 раздельных кластера.** 

Это – система **AP** (Availability & Partition Tolerance), т.к. 2 раздельных кластера могут означать разные данные, что противоречит согласованности. В то же время, может соблюдаться доступность и устойчивость к разделению.

>3.	**Система может не прислать корректный ответ или сбросить соединение.** 

Данное условие противоречит «доступности», поэтому – **CP**-система.
  
\---   
По классификации **PACELC** , предположительно, 1-я система – **EL—PC**, 2-я – **PA—AL**, 3-я – **PA—EC**.  
\---  
*Если ответы некорректны, прошу привести правильные, т.к. трактовать можно в разную сторону, и изучая сей материал с нуля, легко ошибиться.*
___
### Задача 3
*Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?*

Решение
---

Не могут, т.к. один принцип «противопоставляет» себя другому.

Приоритет **ACID** – обеспечение надежности и предсказуемости работы БД (соблюдением фиксации транзакций БД только в полностью завершенном виде, только с допустимыми результатами, без искажения другими одновременными транзакциями, обеспечением гарантированного применения успешных транзакций, независимо от аппаратных сбоев и т.п.). А приоритет **BASE** – Высокая производительность, допускающая невыполнение части транзакций и искажение данных (но с конечной согласованностью).
___
### Задача 4
*Вам дали задачу написать системное решение, основой которого бы послужили:*

+ *фиксация некоторых значений с временем жизни;*
+ *реакция на истечение таймаута.*  

*Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора этой системы?*

Решение (Ответы на вопросы)
---
Не слышал, но читал. Пример такой системы – Redis.   
Минусы: 
- Отсутствие гарантии консистентности данных в Pub/Sub; 
- Отсутствие многопоточности;
- Отсутствие масштабируемости базы данных;
- Хранение данных в Redis происходит в оперативной памяти с периодическим выполнением «снимков» (snapshot) данных на жесткий диск, при котором некоторые данные могут не успеть попасть в снимок, что может привести к потере данных при сбое Redis.

